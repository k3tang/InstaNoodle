{"ast":null,"code":"import _regeneratorRuntime from\"/Users/karentang/Desktop/App_Academy/InstaNoodles/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/karentang/Desktop/App_Academy/InstaNoodles/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";function csrfFetch(_x){return _csrfFetch.apply(this,arguments);}function _csrfFetch(){_csrfFetch=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(url){var options,res,_args=arguments;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:options=_args.length>1&&_args[1]!==undefined?_args[1]:{};options.method=options.method||'GET';options.headers=options.headers||{};if(options.method.toUpperCase()!=='GET'){options.headers['Content-Type']=options.headers['Content-Type']||'application/json';options.headers['X-CSRF-Token']=sessionStorage.getItem('X-CSRF-Token');}if(options.method.toUpperCase()!=='GET'){options.headers['Content-Type']=options.headers['Content-Type']||'application/json';options.headers['X-CSRF-Token']=sessionStorage.getItem('X-CSRF-Token');}_context.next=7;return fetch(url,options);case 7:res=_context.sent;if(!(res.status>=400)){_context.next=10;break;}throw res;case 10:return _context.abrupt(\"return\",res);case 11:case\"end\":return _context.stop();}}},_callee);}));return _csrfFetch.apply(this,arguments);}export function storeCSRFToken(response){var csrfToken=response.headers.get('X-CSRF-Token');if(csrfToken)sessionStorage.setItem('X-CSRF-Token',csrfToken);}export function restoreCSRF(){return _restoreCSRF.apply(this,arguments);}function _restoreCSRF(){_restoreCSRF=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var response;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return csrfFetch('/api/session');case 2:response=_context2.sent;storeCSRFToken(response);return _context2.abrupt(\"return\",response);case 5:case\"end\":return _context2.stop();}}},_callee2);}));return _restoreCSRF.apply(this,arguments);}export default csrfFetch;","map":{"version":3,"names":["csrfFetch","url","options","method","headers","toUpperCase","sessionStorage","getItem","fetch","res","status","storeCSRFToken","response","csrfToken","get","setItem","restoreCSRF"],"sources":["/Users/karentang/Desktop/App_Academy/InstaNoodles/frontend/src/store/csrf.js"],"sourcesContent":["\nasync function csrfFetch(url, options = {}) {\n    options.method = options.method || 'GET';\n    options.headers = options.headers || {};\n\n    if (options.method.toUpperCase() !== 'GET') {\n        options.headers['Content-Type'] =\n            options.headers['Content-Type'] || 'application/json';\n        options.headers['X-CSRF-Token'] = sessionStorage.getItem('X-CSRF-Token');\n    }\n\n    if (options.method.toUpperCase() !== 'GET') {\n        options.headers['Content-Type'] =\n            options.headers['Content-Type'] || 'application/json';\n        options.headers['X-CSRF-Token'] = sessionStorage.getItem('X-CSRF-Token');\n    }\n\n    const res = await fetch(url, options);\n\n    if (res.status >= 400) throw res;\n\n    return res\n\n\n}\nexport function storeCSRFToken(response){\n    const csrfToken = response.headers.get('X-CSRF-Token');\n    if (csrfToken) sessionStorage.setItem('X-CSRF-Token', csrfToken)\n}\n\nexport async function restoreCSRF(){\n    const response = await csrfFetch('/api/session')\n    storeCSRFToken(response);\n    return response;\n}\n\nexport default csrfFetch;"],"mappings":"wTACeA,U,yIAAf,iBAAyBC,GAAzB,oJAA8BC,OAA9B,+CAAwC,EAAxC,CACIA,OAAO,CAACC,MAAR,CAAiBD,OAAO,CAACC,MAAR,EAAkB,KAAnC,CACAD,OAAO,CAACE,OAAR,CAAkBF,OAAO,CAACE,OAAR,EAAmB,EAArC,CAEA,GAAIF,OAAO,CAACC,MAAR,CAAeE,WAAf,KAAiC,KAArC,CAA4C,CACxCH,OAAO,CAACE,OAAR,CAAgB,cAAhB,EACIF,OAAO,CAACE,OAAR,CAAgB,cAAhB,GAAmC,kBADvC,CAEAF,OAAO,CAACE,OAAR,CAAgB,cAAhB,EAAkCE,cAAc,CAACC,OAAf,CAAuB,cAAvB,CAAlC,CACH,CAED,GAAIL,OAAO,CAACC,MAAR,CAAeE,WAAf,KAAiC,KAArC,CAA4C,CACxCH,OAAO,CAACE,OAAR,CAAgB,cAAhB,EACIF,OAAO,CAACE,OAAR,CAAgB,cAAhB,GAAmC,kBADvC,CAEAF,OAAO,CAACE,OAAR,CAAgB,cAAhB,EAAkCE,cAAc,CAACC,OAAf,CAAuB,cAAvB,CAAlC,CACH,CAdL,sBAgBsBC,MAAK,CAACP,GAAD,CAAMC,OAAN,CAhB3B,QAgBUO,GAhBV,oBAkBQA,GAAG,CAACC,MAAJ,EAAc,GAlBtB,gCAkBiCD,IAlBjC,yCAoBWA,GApBX,yD,4CAwBA,MAAO,SAASE,eAAT,CAAwBC,QAAxB,CAAiC,CACpC,GAAMC,UAAS,CAAGD,QAAQ,CAACR,OAAT,CAAiBU,GAAjB,CAAqB,cAArB,CAAlB,CACA,GAAID,SAAJ,CAAeP,cAAc,CAACS,OAAf,CAAuB,cAAvB,CAAuCF,SAAvC,EAClB,CAED,eAAsBG,YAAtB,8C,+FAAO,8KACoBhB,UAAS,CAAC,cAAD,CAD7B,QACGY,QADH,gBAEHD,cAAc,CAACC,QAAD,CAAd,CAFG,iCAGIA,QAHJ,0D,8CAMP,cAAeZ,UAAf"},"metadata":{},"sourceType":"module"}
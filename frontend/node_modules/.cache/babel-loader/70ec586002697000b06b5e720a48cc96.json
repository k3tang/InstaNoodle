{"ast":null,"code":"import csrfFetch from './csrf';\nconst SET_CURRENT_USER = 'session/setCurrentUser';\nconst REMOVE_CURRENT_USER = 'session/removeCurrentUser';\n\nconst setCurrentUser = user => {\n  return {\n    type: SET_CURRENT_USER,\n    payload: user\n  };\n};\n\nconst removeCurrentUser = () => {\n  return {\n    type: REMOVE_CURRENT_USER\n  };\n};\n\nconst storeCSRFToken = response => {\n  const csrfToken = response.headers.get(\"X-CSRF-Token\");\n  if (csrfToken) sessionStorage.setItem('X-CERSF-Token', csrfToken);\n};\n\nconst storeCurrentUser = user => {\n  if (user) sessionStorage.getItem('currentUser', JSON.stringify(user));else sessionStorage.removeItem('currentUser');\n};\n\nexport const login = user => async dispatch => {\n  const {\n    email,\n    password\n  } = user;\n  const response = await csrfFetch('api/session', {\n    method: 'POST',\n    body: JSON.stringify({\n      email,\n      password\n    })\n  });\n  const data = await response.json();\n  dispatch(setCurrentUser(data.user));\n  return response;\n};\nexport const signup = user => async dispatch => {\n  const {\n    name,\n    email,\n    password\n  } = user;\n  const response = await csrfFetch('api/users', {\n    method: 'POST',\n    body: JSON.stringify({\n      name,\n      email,\n      password\n    })\n  });\n  const data = await response.json();\n  storeCurrentUser(data.user);\n  dispatch(setCurrentUser(data.user));\n  return response;\n};\nexport const logout = () => async dispatch => {\n  const response = await csrfFetch('api/session', {\n    method: 'DELETE'\n  });\n  storeCurrentUser(null);\n  dispatch(removeCurrentUser());\n  return response;\n};\nexport const restoreSession = () => async dispatch => {\n  const response = await csrfFetch('api/session');\n  storeCSRFToken(response);\n  const data = await response.json();\n  storeCurrentUser(data.user);\n  dispatch(serCurrentUser(data.user));\n  return response;\n};\nconst initialState = {\n  user: JSON.parse(sessionStorage.getItem('currentUser'))\n};\n\nconst sessionReducer = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case SET_CURRENT_USER:\n      return { ...state\n      };\n  }\n};","map":{"version":3,"names":["csrfFetch","SET_CURRENT_USER","REMOVE_CURRENT_USER","setCurrentUser","user","type","payload","removeCurrentUser","storeCSRFToken","response","csrfToken","headers","get","sessionStorage","setItem","storeCurrentUser","getItem","JSON","stringify","removeItem","login","dispatch","email","password","method","body","data","json","signup","name","logout","restoreSession","serCurrentUser","initialState","parse","sessionReducer","state","action"],"sources":["/Users/karentang/Desktop/App_Academy/InstaNoodles/frontend/src/store/session.js"],"sourcesContent":["import csrfFetch from './csrf';\n\nconst SET_CURRENT_USER = 'session/setCurrentUser';\nconst REMOVE_CURRENT_USER = 'session/removeCurrentUser';\n\nconst setCurrentUser = (user) => { \n    return {\n        type: SET_CURRENT_USER,\n        payload: user\n    };\n};\n\nconst removeCurrentUser = () => {\n    return {\n        type: REMOVE_CURRENT_USER\n    };\n};\n\nconst storeCSRFToken = response => {\n    const csrfToken = response.headers.get(\"X-CSRF-Token\")\n    if (csrfToken) sessionStorage.setItem('X-CERSF-Token', csrfToken);\n}\n\nconst storeCurrentUser = user => {\n    if (user) sessionStorage.getItem('currentUser', JSON.stringify(user));\n    else sessionStorage.removeItem('currentUser');\n}\n\nexport const login = (user) => async (dispatch) => {\n    const {email, password} = user;\n    const response = await csrfFetch('api/session', {\n        method: 'POST',\n        body: JSON.stringify({\n            email,\n            password\n        })\n    });\n\n    const data = await response.json();\n    dispatch(setCurrentUser(data.user));\n    return response;\n};\n\nexport const signup = (user) => async (dispatch) => {\n    const {name, email, password} = user;\n    const response = await csrfFetch('api/users', {\n        method: 'POST',\n        body: JSON.stringify({\n            name,\n            email,\n            password\n        })\n    });\n    const data = await response.json();\n    storeCurrentUser(data.user);\n    dispatch(setCurrentUser(data.user));\n    return response;\n};\n\nexport const logout = () => async dispatch => {\n    const response = await csrfFetch('api/session', {\n        method: 'DELETE'\n    });\n    storeCurrentUser(null);\n    dispatch(removeCurrentUser());\n    return response;\n};\n\nexport const restoreSession = () => async dispatch => {\n    const response = await csrfFetch('api/session');\n    storeCSRFToken(response);\n    const data = await response.json();\n    storeCurrentUser(data.user);\n    dispatch(serCurrentUser(data.user));\n    return response;\n};\n\nconst initialState = { \n    user: JSON.parse(sessionStorage.getItem('currentUser'))\n};\n\nconst sessionReducer = (state = initialState, action) => { \n    switch(action.type) { \n        case SET_CURRENT_USER:\n            return {...state, }\n    }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}